<!DOCTYPE html>
<html>
<head>
	<title>Kevin Kim's: 33Across Project</title>
	<link rel="stylesheet" href="./css/styles.css">
</head>

<body>
	
	<h2 class="title">Kevin Kim's: Tic-Tac-Toe App</h2>

	<div id="wrapper">

		<div class="board-controls"></div> <!-- /.board-controls -->

		<div class="board-table">
			<table class="game-board">
				<tr>
					<td class="cell">
						<div class="box" box-index="0">
							
						</div>
					</td>
					<td class="cell">
						<div class="box" box-index="1">
							
						</div>
					</td>
					<td class="cell">
						<div class="box" box-index="2">
							
						</div>
					</td>
				</tr>
				<tr>
					<td class="cell">
						<div class="box" box-index="3">
							
						</div>
					</td>
					<td class="cell">
						<div class="box" box-index="4">
							
						</div>
					</td>
					<td class="cell">
						<div class="box" box-index="5">
							
						</div>
					</td>
				</tr>
				<tr>
					<td class="cell">
						<div class="box" box-index="6">
							
						</div>
					</td>
					<td class="cell">
						<div class="box" box-index="7">
							
						</div>
					</td>
					<td class="cell">
						<div class="box" box-index="8">
							
						</div>
					</td>
				</tr>
			</table>
		</div> <!-- /.board-table -->

	</div><!--  ./#wrapper -->
	
	
</body>

<script type="text/javascript">
	
	//Utils module with helper functions
	const Utils = (function() {

		function addClickHandlers(elements, handler) {
			for (let i=0; i<elements.length; i++) {
				elements[i].addEventListener('click', handler);
			}
		}

		return {
			addClickHandlers: addClickHandlers
		};

	}());


	const Game = (function() {
		//cached box elements
		let boxElements = document.querySelectorAll('.box');

		let state = {
			boxes: [null, null, null, null, null, null, null, null, null],
			currentPlayer: 'X',
		};

		function handleBoxClick(evt) {
			evt.stopPropagation();
			let selBoxIndex = Number(evt.target.getAttribute('box-index'));
			let currentPlayer = state.currentPlayer;

			//only allow click updates if state of selected box is null (empty)
			if (state.boxes[selBoxIndex] === null) {
				state.boxes[selBoxIndex] = currentPlayer;
				this.innerHTML = currentPlayer;
				//toggle to next player after state is updated
				updateToNextPlayer();
			}

		}

		function updateToNextPlayer() {
			let currentPlayer = state.currentPlayer;
			if (currentPlayer === 'X') {
				state.currentPlayer = 'O';
			} else {
				state.currentPlayer = 'X';
			}
		}

		function init() {
			Utils.addClickHandlers(boxElements, handleBoxClick);
		}

		return {
			init: init
		};

	}());


	Game.init();


</script>

</html>